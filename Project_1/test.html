<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>فروشگاه تست</title>
  <style>
    body { font-family: sans-serif; direction: rtl; }
    .cart-sidebar { position: fixed; top: 0; right: -400px; width: 350px; height: 100%; background: #fff; box-shadow: -2px 0 10px rgba(0,0,0,.2); transition: .3s; z-index: 1000; overflow-y: auto; }
    .cart-sidebar.open { right: 0; }
    .cart-overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,.5); z-index: 999; }
    .cart-overlay.active { display: block; }
    .cart-header { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #ddd; }
    .cart-items { padding: 10px; }
    .cart-item { display: flex; gap: 10px; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    .cart-item img { width: 60px; height: 60px; object-fit: cover; }
    .cart-item-info { flex: 1; }
    .cart-total { padding: 15px; font-weight: bold; }
    .btn { background: #007bff; color: #fff; border: none; padding: 6px 10px; cursor: pointer; border-radius: 5px; }
    .btn-danger { background: #dc3545; }
    .notification { position: fixed; bottom: 20px; right: 20px; background: #333; color: #fff; padding: 10px 15px; border-radius: 5px; display: none; }
  </style>
</head>
<body>

  <!-- هدر -->
  <header>
    <button id="cartBtn" class="btn">🛒 سبد خرید <span id="cartCount">0</span></button>
  </header>

  <!-- محصول -->
  <main>
    <h2>عطر Dior Sauvage</h2>
    <img src="img.png" alt="Dior Sauvage" width="150">
    <p>حجم: 100ml</p>
    <p>قیمت: ۲,۸۵۰,۰۰۰ تومان</p>
    <button class="btn" onclick="addToCart({
        id: 'p1',
        name: 'Dior Sauvage',
        volume: '100ml',
        price: 2850000,
        image: 'img.png'
      }, 1)">
      افزودن به سبد خرید
    </button>
  </main>

  <!-- سایدبار سبد خرید -->
  <div id="cartSidebar" class="cart-sidebar">
    <div class="cart-header">
      <span>سبد خرید</span>
      <button id="closeCart" class="btn-danger">X</button>
    </div>
    <div id="cartItems" class="cart-items"></div>
    <div class="cart-total">جمع کل: <span id="cartTotal">۰ تومان</span></div>
  </div>

  <!-- اوورلی -->
  <div id="cartOverlay" class="cart-overlay"></div>

  <!-- نوتیفیکیشن -->
  <div id="notification"><span id="notificationText"></span></div>

  <!-- کد جاوااسکریپت -->
  <script src="common.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      loadCartFromStorage();
      updateCartCount();
      initCart();
    });
  </script>

</body>
</html>
